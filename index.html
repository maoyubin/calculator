<!DOCTYPE html>
<html>
<head>
	<title>Button Web Component</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" type="text/css" href="calculator.css" media="screen" />
	<link href='https://fonts.googleapis.com/css?family=Lato|Raleway:300,400|Roboto:300,400' rel='stylesheet'>
	<script src="https://use.fontawesome.com/c3e06da910.js"></script>
</head>
<body>
	<div id="header-wrap">
		<header id="header" class="row clearfix">
			<nav id="main-nav" role="navigation">
				<ul>
					<li>
						<a href="/"> <i class="fa fa-angle-double-left" aria-hidden="true"></i>
							Go Back
						</a>
					</li>
				</ul>
			</nav>
		</header>
	</div>
	<div id="main-wrap">
		<section class="page-title-wrap">
			<div class="row">
				<h1 id="page-title">Calculator</h1>
			</div>
		</section>
		<main id="content" class="row">

			<div id="calculator">
				<!-- Screen and clear key -->
				<div class="top">
					<span class="clear">C</span>
					<div class="screen"></div>
				</div>

				<div class="keys">
					<!-- operators and other keys -->
					<span>7</span>
					<span>8</span>
					<span>9</span>
					<span class="operator">+</span>
					<span>4</span>
					<span>5</span>
					<span>6</span>
					<span class="operator">-</span>
					<span>1</span>
					<span>2</span>
					<span>3</span>
					<span class="operator">/</span>
					<span>0</span>
					<span>.</span>
					<span class="eval">=</span>
					<span class="operator">x</span>
				</div>
			</div>
		</main>
	</div>

	<div id="footer-wrap">
		<footer>
			<p>Copyright &copy; 2016</p>
		</footer>
	</div>

	<script type="text/javascript">
		var keys = document.querySelectorAll('#calculator span');
		var operators = ['+', '-', 'x', '/'];
		var decimalAdded = false;

		// Add onclick event to all the keys
		for(var i = 0; i < keys.length; i++) {
			keys[i].onclick = function(e) {
				var input = document.querySelector('.screen');
				var inputVal = input.innerHTML;
				var btnVal = this.innerHTML;
				
				if(btnVal == 'C') {
					input.innerHTML = '';
					decimalAdded = false;
				}else if(btnVal == '=') {
					var equation = inputVal;
					var lastChar = equation[equation.length - 1];
					
					equation = equation.replace(/x/g, '*');
					
					if(operators.indexOf(lastChar) > -1 || lastChar == '.')
						equation = equation.replace(/.$/, '');
					if(equation)
						input.innerHTML = eval(equation);
						
					decimalAdded = false;
				}else if(operators.indexOf(btnVal) > -1) {
					var lastChar = inputVal[inputVal.length - 1];
					if(inputVal != '' && operators.indexOf(lastChar) == -1){
						input.innerHTML += btnVal;
					}else if(inputVal == '' && btnVal == '-'){
						// if the string is empty,minus can be added 
						input.innerHTML += btnVal;
					}if(operators.indexOf(lastChar) > -1 && inputVal.length > 1) {
						//at the end of string will get replaced by new operator
						input.innerHTML = inputVal.replace(/.$/, btnVal);
					}
					decimalAdded =false;
				}else if(btnVal == '.') {
					//Use 'decimalAdded' to keep 'decimal' from adding once again
					if(!decimalAdded) {
						input.innerHTML += btnVal;
						decimalAdded = true;
					}
				}else {
					input.innerHTML += btnVal;
				}
				
				e.preventDefault();
			} 
		}

	</script>
</body>
</html>